
[1mFrom:[0m /home/greg/Projects/angel/lib/angel/controllers/designs_controller.rb:33 Angel::Controllers::DesignsController#update:

    [1;34m18[0m: [32mdef[0m [1;34mupdate[0m
    [1;34m19[0m:   options_data = @design.user_options
    [1;34m20[0m:   data = {}
    [1;34m21[0m:   options_data.each [32mdo[0m |field_name, user_option|
    [1;34m22[0m:     [32mif[0m(user_option.is_a?([1;34;4mHash[0m))
    [1;34m23[0m:       data[field_name] = {}
    [1;34m24[0m:       data[field_name] = params.require([33m:design[0m).require([33m:user_options[0m).require(field_name).permit(user_option[[33m:value[0m].symbolize_keys.keys).to_h.symbolize_keys
    [1;34m25[0m:       [32mif[0m(user_option[[33m:type[0m].match?([35m[1;35m/[0m[35mcheck_box[1;35m/[0m[35m[0m))
    [1;34m26[0m:         data[field_name] = data[field_name].each{|k,v| data[field_name][k] = [[1;36mfalse[0m,[1;36mtrue[0m][v.to_i]}
    [1;34m27[0m:       [32mend[0m
    [1;34m28[0m:       data[field_name] = user_option[[33m:value[0m].merge(data[field_name])
    [1;34m29[0m:     [32melse[0m
    [1;34m30[0m:       data[field_name] = params.require([33m:design[0m).require([33m:user_options[0m).permit(f)
    [1;34m31[0m:     [32mend[0m
    [1;34m32[0m:   [32mend[0m
 => [1;34m33[0m:   binding.pry
    [1;34m34[0m:   options_data = options_data.map{|field_name, option| option[[33m:value[0m] = data[field_name]; option }
    [1;34m35[0m:   @design.user_options = options_data
    [1;34m36[0m: 
    [1;34m37[0m:   [32mif[0m(@design.save)
    [1;34m38[0m:     render([35mpartial[0m:[31m[1;31m"[0m[31mdesign[1;31m"[0m[31m[0m, [35mlocals[0m:{[35mdesign[0m:@design})
    [1;34m39[0m:   [32melse[0m
    [1;34m40[0m:     render([35mpartial[0m:[31m[1;31m"[0m[31mturbo_form[1;31m"[0m[31m[0m, [35mlocals[0m:{[35mdesign[0m:@design})
    [1;34m41[0m:   [32mend[0m
    [1;34m42[0m: [32mend[0m

